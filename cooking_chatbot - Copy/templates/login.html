<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body class="bg-light">

<div class="container mt-5">
    <h3 class="text-center">ğŸ” Login</h3>

    <input id="username" class="form-control mt-3" placeholder="Username">
    <input id="password" type="password" class="form-control mt-2" placeholder="Password">

    <!-- âœ… FIXED FUNCTION NAME -->
    <button class="btn btn-primary w-100 mt-3" onclick="loginUser()">
        Login
    </button>

    <p class="text-center mt-3">
        New user?
        <a href="/register" class="fw-bold text-decoration-none">
            Create an account
        </a>
    </p>
</div>

<script>
function loginUser() {
    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;

    fetch("/login", {
        method: "POST",
        body: new URLSearchParams({ username, password })
    })
    .then(res => res.json())
    .then(data => {
        alert(data.message);
        if (data.status === "success") {
            window.location.href = "/app";
        }
    });
}
</script>

</body>
</html>
